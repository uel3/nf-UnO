report_comment: >
  This report has been generated by the <a href="https://github.com/nf-core/uno/tree/dev" target="_blank">nf-core/uno</a>
  analysis pipeline. For information about how to interpret these results, please see the
  <a href="https://nf-co.re/uno/dev/docs/output" target="_blank">documentation</a>.

export_plots: true
run_modules:
  - fastqc
  - bowtie2
  - custom_content

## Module order
module_order:
  - "fastqc":
      name: "FastQC: Raw Reads"
      path_filters_exclude:
        - "*trimmed*"
  - "bowtie2":
      name: "Bowtie2: Host Removal"
      info: "Mapping statistics of reads mapped to host for removal."
      path_filters:
        - "*_host_removed.bowtie2.log"   
  - "fastqc":
      name: "FastQC: After Preprocessing"
      info: "After quality trimming and sequencing adapter removal."
      path_filters:
        - "*trimmed*"
  - custom_content

custom_plot_config:
  general_stats_table:
    "scale": False
custom_data:
  midas2_species_abundance:
    file_format: 'yaml'
    section_name: "MIDAS2 Species Abundance"
    description: 'MIDAS2 species abundance of raw reads using MIDAS2. MIDAS2 uses the Unified Human Gastrointestinal Genome (UHGG) database to check reads prior to assembly and binning for known bugs missed by conventional testing.'
  
  bin_depth_heatmap_dastool:
      id: 'bin_depth_heatmap_dastool'
      section_name: 'Binning:Sample Coverage of DASTool Bins'
      description: "Sample reads are mapped against DASTool refined bins to calculate bin depths with log transformation. Only bins with reads mapped from all samples are of interest for downstream analysis. Samples with no abundance/contribution for a bin will have a value of -6.0. Any value above -0.6 indicates presence of that bin/bug in the correponding sample."
      plot_type: 'heatmap'
      pconfig:
            id: 'bin_depth_heatmap_dastool'
      sort_rows: true
  bin_depth_heatmap_maxbin2:
      id: 'bin_depth_heatmap_maxbin2'
      section_name: 'Binning:Sample Coverage of MaxBin2 Bins'
      description: "Sample reads are mapped against MaxBin2 generated bins to calculate bin depths with log transformation. Only bins with reads mapped from all samples are of interest for downstream analysis. Samples with no abundance/contribution for a bin will have a value of -6.0. Any value above -0.6 indicates presence of that bin/bug in the correponding sample."
      plot_type: 'heatmap'
      pconfig:
            id: 'bin_depth_heatmap_maxbin2'
      sort_rows: true
  bin_depth_heatmap_metabat2:
      id: 'bin_depth_heatmap_metabat2'
      section_name: 'Binning:Sample Coverage of MetaBat2 Bins'
      description: "Sample reads are mapped against MetaBat2 generated bins to calculate bin depths with log transformation. Only bins with reads mapped from all samples are of interest for downstream analysis. Samples with no abundance/contribution for a bin will have a value of -6.0. Any value above -0.6 indicates presence of that bin/bug in the correponding sample."
      plot_type: 'heatmap'
      pconfig:
            id: 'bin_depth_heatmap_metabat2'
      sort_rows: true
    
  checkm_multiqc_report:
    section_name: "CheckM:Bin Quality Statistics"
    description: "Quality assessment of genome bins using CheckM."
    plot_type: 'table'
sp:
  midas2_species_abundance:
    fn: 'combined_midas2_report_mqc.yaml'
  bin_depth_heatmap_dastool:
    fn: '*DASTool*heatmap_data.txt'
  bin_depth_heatmap_maxbin2:
    fn: '*MaxBin2*heatmap_data.txt'
  bin_depth_heatmap_metabat2:
    fn: '*MetaBAT2*heatmap_data.txt'
  checkm_multiqc_report:
    fn: '*checkm_report_mqc.yaml'
ignore_images: false

## General Stats customisation
table_columns_visible:
  "FastQC: Raw Reads":
    percent_duplicates: True
    avg_sequence_length: False
    median_sequence_length: True
    total_sequences: True
    percent_fails: False
  "FastQC: After Preprocessing":
    percent_duplicates: True
    avg_sequence_length: False
    median_sequence_length: True
    total_sequences: True
    percent_fails: False
  "Bowtie2: host removal":
    overall_alignment_rate: False

table_columns_placement:
  "FastQC: Raw Reads":
    percent_duplicates: 1000
    avg_sequence_length: 1800
    median_sequence_length: 1400 
    percent_gc: 1600
    total_sequences: 1200
    percent_fails: 2000
  "FastQC: After Preprocessing":
    percent_duplicates: 1100
    avg_sequence_length: 1900
    median_sequence_length: 1500
    percent_gc: 1700
    total_sequences: 1300
    percent_fails: 2100
  midas2_species_abundance:
    sample_name: 900
    species_id: 910
    Lineage: 920
    fraction_covered: 930
    mean_coverage: 960
    Continent: 1000
    genome_length: 950
    covered_bases: 940
    total_depth: 970
    aligned_reads: 980
    mapped_reads: 990

table_columns_name:
  "FastQC: Raw Reads":
    percent_duplicates: "% Dups"
    percent_gc: "% GC"
    avg_sequence_length: "Avg. length"
    median_sequence_length: "Median length" 
    total_sequences: "M Seqs"
    percent_fails: "% Fails"
  "FastQC: After Preprocessing":
    percent_duplicates: "% Dups"
    percent_gc: "% GC"
    avg_sequence_length: "Avg. length"
    median_sequence_length: "Median length" 
    total_sequences: "M Seqs"
    percent_fails: "% Fails"
  "Bowtie2: host removal":
    overall_alignment_rate: "Alignment % to Human Genome"
table_cond_formatting_rules:
  Completeness:
    pass:
      - gt: 90.0
    warn:
      - lt: 89
    fail:
      - lt: 49.0
  Contamination:
    pass:
      - lt: 5.0
    warn:
      - gt: 5.01
    fail:
      - gt: 11.0
table_cond_formatting_colours:
  - pass: '#4CAF50'
  - warn: '#FFA726'
  - fail: '#E53935'
  
report_section_order:
  general_stats:
    order: 130
  bowtie2:
    order: 100
  checkm_stats:
    order: 50
  bin_depth_heatmap_dastool:
    order: 80
  bin_depth_heatmap_metabat2:
    order: 60
  bin_depth_heatmap_maxbin2:
    order: 70
  midas2_species_abundance:
    order: 120
  fastqc:
    order: 110
  fastqc_status_checks:
        order: -1000
  fastqc-1:
    order: 90
  fastqc_status_checks-1:
        order: -1000
  "nf-core-uno-methods-description":
    order: 10
  software_versions:
    order: 30
  multiqc_software_versions:
    order: 20
  "nf-core-uno-summary":
    order: 40
section_comments:
  general_stats: "The user can expect to find general information about the input mNGS reads before and after QC and adapter trimming. More details about input mNGS reds can be found in the detailed FastQC sections."
  midas2_species_abundance: "#####The user can see the taxonomic profile of the raw input mNGS reads from MIDAS2. The MIDAS2 Species Abundance table organizes the output by the unique ID made up of the mNGS read name provided by the user combined with the arbitrary species ID assigned by MIDAS2."
  fastqc_sequence_counts: "#####Ideally the user would want to see an even unique reads count across all samples but it's not the end of the world if that is not the case. See FastQC: After Preprocessing results."
  fastqc_per_base_sequence_quality: "#####Illumina read quality should have Phred Score between 25 to 30. For FastQC: Raw Reads, the user may see below illumina quality. See FastQC: After Preprocessing results."
  fastqc_per_sequence_gc_content: "#####The user should expect to see a standard Bell curve around 50%. For FastQC: Raw Reads, this may not be the case due to low quality reads that show up in metagenomic sequencing before preproccessing. See FastQC: After Preprocessing results."
  fastqc_per_sequence_gc_content-2: "####The user should expect to see a standard Bell curve around 50%." 
  bowtie2: "#####The user can see the number of mNGS reads or percentage of mNGS reads per input read that align to the human host. The portion of mNGS read in read, are the reads used in downstream processes, with human host sequence removed. mNGS read that are blue, light blue, orange, or yellow are considered host reads are discarded, and not included in downstream analysis. "
  bin_depth_heatmap_dastool: "#####The user can see the how the individual mNGS contribute to the bins generated by DASTool. The bins represent species identified from all outbreak mNGS reads.  Bins with read depth values greater than -5.99 would indicate contribution by that individual mNGS read. Bins with read depth values equal to -6.0 would indicate no contribution by that individual mNGS read. Bins that have contributions from all individual mNGS a will be considered potential etiological agents."
  bin_depth_heatmap_maxbin2: "#####The user can see the how the individual mNGS contribute to the bins generated by MaxBin2. The bins represent species identified from all outbreak mNGS reads.  Bins with read depth values greater than -5.99 would indicate contribution by that individual mNGS read. Bins with read depth values equal to -6.0 would indicate no contribution by that individual mNGS read. Bins that have contributions from all individual mNGS a will be considered potential etiological agents."
  bin_depth_heatmap_metabat2: "#####The user can see the how the individual mNGS contribute to the bins generated by MetaBat2. The bins represent species identified from all outbreak mNGS reads.  Bins with read depth values greater than -5.99 would indicate contribution by that individual mNGS read. Bins with read depth values equal to -6.0 would indicate no contribution by that individual mNGS read. Bins that have contributions from all individual mNGS a will be considered potential etiological agents."
  checkm_stats: "#####The user can see the quality metrics of the species bins generated from all outbreak reads. The user can interpret the quality of the species bins based on combinations of the following metrics: completeness, contamination, and strain heterogeneity. High Quality bins should have completeness >90% and contamination <5%. Moderate quality bins should have completeness  >50% and contamination <10%. Low quality bins will have completeness <50% and contamination <10%. Strain heterogeneity should be interpreted as the amount of contamination attributed to closely related species."