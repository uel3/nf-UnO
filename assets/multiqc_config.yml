report_comment: >
  This report has been generated by the <a href="https://github.com/nf-core/uno/tree/dev" target="_blank">nf-core/uno</a>
  analysis pipeline. For information about how to interpret these results, please see the
  <a href="https://nf-co.re/uno/dev/docs/output" target="_blank">documentation</a>.

export_plots: true
run_modules:
  - fastqc
  - bowtie2
  - custom_content
remove_sections:
  - fastqc_per_base_sequence_content
## Module order
module_order:
  - "fastqc":
      name: "FastQC: Raw Reads"
      path_filters_exclude:
        - "*trimmed*"
  - "bowtie2":
      name: "Bowtie2: Host Removal"
      info: "Mapping statistics of reads mapped to host for removal."
      path_filters:
        - "*_host_removed.bowtie2.log"   
  - "fastqc":
      name: "FastQC: After Preprocessing"
      info: "After quality trimming and sequencing adapter removal."
      path_filters:
        - "*trimmed*"
  - custom_content
custom_data:
  midas2_species_abundance:
    file_format: 'yaml'
    section_name: "MIDAS2 Species Abundance"
    description: 'MIDAS2 species abundance of raw reads using MIDAS2. MIDAS2 uses the Unified Human Gastrointestinal Genome (UHGG) database to check reads prior to assembly and binning for known bugs missed by conventional testing.'
  
  bin_depth_heatmap_dastool:
      id: 'bin_depth_heatmap_dastool'
      section_name: 'Binning:Sample Coverage of DASTool Bins'
      description: "Sample reads are mapped against DASTool refined bins to calculate bin depths with log transformation. Only bins with reads mapped from all samples are of interest for downstream analysis. Samples with no abundance/contribution for a bin will have a value of -6.0. Any value above -0.6 indicates presence of that bin/bug in the correponding sample."
      plot_type: 'heatmap'
      pconfig:
            id: 'bin_depth_heatmap_dastool'
      sort_rows: true
  bin_depth_heatmap_maxbin2:
      id: 'bin_depth_heatmap_maxbin2'
      section_name: 'Binning:Sample Coverage of MaxBin2 Bins'
      description: "Sample reads are mapped against MaxBin2 generated bins to calculate bin depths with log transformation. Only bins with reads mapped from all samples are of interest for downstream analysis. Samples with no abundance/contribution for a bin will have a value of -6.0. Any value above -0.6 indicates presence of that bin/bug in the correponding sample."
      plot_type: 'heatmap'
      pconfig:
            id: 'bin_depth_heatmap_maxbin2'
      sort_rows: true
  bin_depth_heatmap_metabat2:
      id: 'bin_depth_heatmap_metabat2'
      section_name: 'Binning:Sample Coverage of MetaBat2 Bins'
      description: "Sample reads are mapped against MetaBat2 generated bins to calculate bin depths with log transformation. Only bins with reads mapped from all samples are of interest for downstream analysis. Samples with no abundance/contribution for a bin will have a value of -6.0. Any value above -0.6 indicates presence of that bin/bug in the correponding sample."
      plot_type: 'heatmap'
      pconfig:
            id: 'bin_depth_heatmap_metabat2'
      sort_rows: true
    
  checkm_multiqc_report:
    section_name: "CheckM:Bin Quality Statistics"
    description: "Quality assessment of genome bins using CheckM."
    plot_type: 'table'
sp:
  midas2_species_abundance:
    fn: 'combined_midas2_report_mqc.yaml'
  bin_depth_heatmap_dastool:
    fn: '*DASTool*heatmap_data.txt'
  bin_depth_heatmap_maxbin2:
    fn: '*MaxBin2*heatmap_data.txt'
  bin_depth_heatmap_metabat2:
    fn: '*MetaBAT2*heatmap_data.txt'
  checkm_multiqc_report:
    fn: '*checkm_report_mqc.yaml'
ignore_images: false

## General Stats customisation
table_columns_visible:
  "FastQC: Raw Reads":
    percent_duplicates: True
    avg_sequence_length: False
    median_sequence_length: True
    total_sequences: True
    percent_fails: False
  "FastQC: After Preprocessing":
    percent_duplicates: True
    avg_sequence_length: False
    median_sequence_length: True
    total_sequences: True
    percent_fails: False
  "Bowtie2: host removal":
    overall_alignment_rate: False

table_columns_placement:
  "FastQC: Raw Reads":
    percent_duplicates: 1000
    avg_sequence_length: 1200
    median_sequence_length: 1300
    total_sequences: 1400
    percent_fails: 1500
  "FastQC: After Preprocessing":
    percent_duplicates: 2000
    avg_sequence_length: 2200
    median_sequence_length: 2300
    total_sequences: 2400
    percent_fails: 2500
  midas2_species_abundance:
    sample_name: 900
    species_id: 910
    Lineage: 920
    fraction_covered: 930
    mean_coverage: 960
    Continent: 1000
    genome_length: 950
    covered_bases: 940
    total_depth: 970
    aligned_reads: 980
    mapped_reads: 990

table_columns_name:
  "FastQC: Raw Reads":
    percent_duplicates: "% Dups"
    percent_gc: "% GC"
    avg_sequence_length: "Avg. length"
    median_sequence_length: "Median length" 
    total_sequences: "M Seqs"
    percent_fails: "% Fails"
  "FastQC: After Preprocessing":
    percent_duplicates: "% Dups"
    percent_gc: "% GC"
    avg_sequence_length: "Avg. length"
    median_sequence_length: "Median length" 
    total_sequences: "M Seqs"
    percent_fails: "% Fails"
  "Bowtie2: host removal":
    overall_alignment_rate: "Alignment % to Human Genome"
table_cond_formatting_rules:
  Completeness:
    pass:
      - gt: 50.0
    fail:
      - lt: 49.0
  Contamination:
    pass:
      - lt: 10.0
    warn:
      - gt: 11.0
    fail:
      - gt: 15.0
table_cond_formatting_colours:
  - pass: '#4CAF50'
  - warn: '#FFA726'
  - fail: '#E53935'
  
report_section_order:
  general_stats:
    order: 130
  bowtie2:
    order: 100
  checkm_stats:
    order: 50
  bin_depth_heatmap_dastool:
    order: 80
  bin_depth_heatmap_metabat2:
    order: 60
  bin_depth_heatmap_maxbin2:
    order: 70
  midas2_species_abundance:
    order: 120
  fastqc:
    order: 110
  fastqc-1:
    order: 90
  "nf-core-uno-methods-description":
    order: 10
  software_versions:
    order: 30
  multiqc_software_versions:
    order: 20
  "nf-core-uno-summary":
    order: 40
section_comments:
  general_stats: "#####The user can expect to find general information about the input mNGS reads before and after QC and adapter trimming. More details about input mNGS reds can be found in the detailed FastQC sections."
  midas2_species_abundance: "#####The user can see the taxonomic profile of the raw input mNGS reads from MIDAS2. The MIDAS2 Species Abundance table organizes the output by the unique ID made up of the mNGS read name provided by the user combined with the arbitrary species ID assigned by MIDAS2."
  bowtie2: "#####The user can see the number of mNGS reads or percentage of mNGS reads per input read that align to the human host. The portion of mNGS read in read, are the reads used in downstream processes, with human host sequence removed. mNGS read that are blue, light blue, orange, or yellow are considered host reads are discarded, and not included in downstream analysis. "
  bin_depth_heatmap_dastool: "#####The user can see the how the individual mNGS contribute to the bins generated by DASTool. The bins represent species identified from all outbreak mNGS reads.  Bins with read depth values greater than -5.99 would indicate contribution by that individual mNGS read. Bins with read depth values equal to -6.0 would indicate no contribution by that individual mNGS read. Bins that have contributions from all individual mNGS a will be considered potential etiological agents."
  bin_depth_heatmap_maxbin2: "#####The user can see the how the individual mNGS contribute to the bins generated by MaxBin2. The bins represent species identified from all outbreak mNGS reads.  Bins with read depth values greater than -5.99 would indicate contribution by that individual mNGS read. Bins with read depth values equal to -6.0 would indicate no contribution by that individual mNGS read. Bins that have contributions from all individual mNGS a will be considered potential etiological agents."
  bin_depth_heatmap_metabat2: "#####The user can see the how the individual mNGS contribute to the bins generated by MetaBat2. The bins represent species identified from all outbreak mNGS reads.  Bins with read depth values greater than -5.99 would indicate contribution by that individual mNGS read. Bins with read depth values equal to -6.0 would indicate no contribution by that individual mNGS read. Bins that have contributions from all individual mNGS a will be considered potential etiological agents."
  checkm_multiqc_report: "#####The user can see the quality metrics of the species bins generated from all outbreak reads. The user can interpret the quality of the species bins based on combinations of the following metrics include completeness, contamination, and strain heterogeneity."


